import 'dart:async';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'hive_storage_service.dart';

enum AppLanguage {
  english('en', 'English', 'English'),
  spanish('es', 'Español', 'Spanish'),
  french('fr', 'Français', 'French'),
  german('de', 'Deutsch', 'German'),
  italian('it', 'Italiano', 'Italian'),
  portuguese('pt', 'Português', 'Portuguese');

  const AppLanguage(this.code, this.displayName, this.englishName);
  final String code;
  final String displayName;
  final String englishName;
}

class TranslationService {
  static final Rx<AppLanguage> _currentLanguage = AppLanguage.english.obs;

  /// Get current language (observable for reactive updates)
  static AppLanguage get currentLanguage => _currentLanguage.value;

  /// Get current language as observable
  static Rx<AppLanguage> get currentLanguageObs => _currentLanguage;

  /// Initialize translation service
  static Future<void> init() async {
    _currentLanguage.value = HiveStorageService.loadLanguage();
    debugPrint('TranslationService: Initialized with language: ${_currentLanguage.value.displayName}');
  }

  /// Set app language
  static Future<void> setLanguage(AppLanguage language) async {
    _currentLanguage.value = language;
    await HiveStorageService.saveLanguage(language);
    debugPrint('TranslationService: Language changed to: ${language.displayName}');
    // Batch updates to prevent UI jank - use microtask to defer to next frame
    Future.microtask(() {
      _currentLanguage.refresh();
    });
  }

  /// Translation maps for each language
  static final Map<AppLanguage, Map<String, String>> _translations = {
    AppLanguage.english: {
      'app_name': 'Eidos',
      'preferences': 'Preferences',
      'app_preferences': 'App Preferences',
      'chat_preferences': 'Chat Preferences',
      'language': 'Language',
      'select_app_language': 'Select the app language',
      'app_theme': 'App Theme',
      'switch_theme': 'Switch between light and dark mode',
      'dark_mode': 'Dark Mode',
      'light_mode': 'Light Mode',
      'ai_personality': 'AI Personality',
      'select_ai_personality': 'Select how the AI should respond',
      'chat_rules': 'Chat Rules',
      'more': 'More',
      'cancel': 'Cancel',
      'save': 'Save',
      'delete': 'Delete',
      'edit': 'Edit',
      'add': 'Add',
      'close': 'Close',
      'back': 'Back',
      'home': 'Home',
      'new_chat': 'New Chat',
      'conversations': 'Conversations',
      'no_conversations_yet': 'No conversations yet',
      'start_new_chat': 'Start New Chat',
      'start_chat_prompt': 'Start a new chat to begin',
      'search': 'Search',
      'documents': 'Documents',
      'analytics': 'Analytics',
      'advanced_settings': 'Advanced Settings',
      'notifications': 'Notifications',
      'feedback_support': 'Feedback & Support',
      'language_changed': 'Language Changed',
      'app_language_changed_to': 'App language changed to',
      'notification_settings_saved': 'Notification settings saved successfully',
      'feedback_sent': 'Feedback sent',
      'thanks_for_message': "Thanks for your message! We'll review it soon.",
      'error': 'Error',
      'success': 'Success',
      'welcome_to_eidos': 'Welcome to Eidos',
      'search_chats': 'Search chats...',
      'account': 'Account',
      'user': 'User',
      'edit_profile': 'Edit Profile',
      'log_out': 'Log Out',
      'create_new_chat': 'Create New Chat',
      'chat_archive': 'Chat Archive',
      'archive': 'Archive',
      'unarchive': 'Unarchive',
      'failed_to_delete_conversation': 'Failed to delete conversation',
      'type_a_message': 'Type a message...',
      'sync_with_cloud': 'Sync with Cloud',
      'sync_all_data_with_cloud': 'Sync all data with cloud',
      'syncing_data': 'Syncing data...',
      'sync_completed_successfully': 'Sync completed successfully',
      'sync_failed': 'Sync failed. Please try again.',
      'must_be_logged_in_to_sync': 'You must be logged in to sync',
      'send': 'Send',
      'archived_chats': 'Archived Chats',
      'no_archived_chats': 'No archived chats',
      'pull_to_refresh': 'Pull to refresh',
      'login': 'Login',
      'register': 'Register',
      'email': 'Email',
      'password': 'Password',
      'full_name': 'Full Name',
      'confirm_password': 'Confirm Password',
      'forgot_password': 'Forgot Password?',
      'already_have_account': 'Already have an account?',
      'dont_have_account': "Don't have an account?",
      'sign_in': 'Sign In',
      'sign_up': 'Sign Up',
      'sign_in_with_passkey': 'Sign in with Passkey',
      'sign_in_with_password': 'Sign in with Password',
      'choose_login_method': 'Choose login method',
      'enter_email_first': 'Enter your email first',
      'no_passkey_registered': 'No passkey registered. Please use password login.',
      'passkey_authentication': 'Passkey Authentication',
      'register_passkey': 'Register Passkey',
      'manage_passkeys': 'Manage Passkeys',
      'passkey_registered': 'You have a passkey registered. You can sign in with biometrics.',
      'register_passkey_description': 'Register a passkey to sign in securely with your fingerprint or face.',
      'enter_password_to_register': 'Enter your password to register a passkey. This will allow you to sign in with biometrics.',
      'passkey_registered_successfully': 'Passkey registered successfully!',
      'passkey_deleted_successfully': 'Passkey deleted successfully',
      'device_not_support_biometrics': 'Your device does not support biometric authentication.',
      'biometric_authentication_failed': 'Biometric authentication was cancelled or failed. Please try again.',
      'no_passkeys_found': 'No passkey found for this account. Please register a passkey first or use password login.',
      'passkey_registration_incomplete': 'Passkey registration incomplete. Please register a new passkey.',
      'passkey_authentication_failed': 'Passkey authentication failed. Please try again or use password login.',
      'change_password': 'Change Password',
      'new_password': 'New Password',
      'save_changes': 'Save Changes',
      'delete_account': 'Delete Account',
      'are_you_sure_delete': 'Are you sure you want to delete your account?',
      'this_action_cannot_be_undone': 'This action cannot be undone',
      'profile_picture': 'Profile Picture',
      'select_avatar': 'Select Avatar',
      'upload_image': 'Upload Image',
      'take_photo': 'Take Photo',
      'choose_from_gallery': 'Choose from Gallery',
      'frequently_asked_questions': 'Frequently asked questions',
      'send_us_message': 'Send us a message',
      'how_start_new_chat': 'How do I start a new chat?',
      'how_start_new_chat_answer': 'Tap the + button in the header or use Create New Chat from the menu.',
      'how_change_password': 'How do I change my password?',
      'how_change_password_answer': 'Open Edit Profile from the header menu, then tap Change Password.',
      'where_find_documents': 'Where can I find my documents?',
      'where_find_documents_answer': 'Open Documents from the quick actions below the search bar on Home.',
      'how_report_bug': 'How do I report a bug?',
      'how_report_bug_answer': 'Use the form below. Include steps to reproduce and screenshots if possible.',
      'subject': 'Subject',
      'message': 'Message',
      'attach_file': 'Attach File',
      'attachment': 'Attachment',
      'reminder_created': 'Reminder Created',
      'reminder_set_for': 'Reminder set for',
      'failed_to_create_reminder': 'Failed to create reminder',
    },
    AppLanguage.spanish: {
      'app_name': 'Eidos',
      'preferences': 'Preferencias',
      'app_preferences': 'Preferencias de la App',
      'chat_preferences': 'Preferencias de Chat',
      'language': 'Idioma',
      'select_app_language': 'Selecciona el idioma de la app',
      'app_theme': 'Tema de la App',
      'switch_theme': 'Cambiar entre modo claro y oscuro',
      'dark_mode': 'Modo Oscuro',
      'light_mode': 'Modo Claro',
      'ai_personality': 'Personalidad de la IA',
      'select_ai_personality': 'Selecciona cómo debe responder la IA',
      'chat_rules': 'Reglas de Chat',
      'more': 'Más',
      'cancel': 'Cancelar',
      'save': 'Guardar',
      'delete': 'Eliminar',
      'edit': 'Editar',
      'add': 'Agregar',
      'close': 'Cerrar',
      'back': 'Atrás',
      'home': 'Inicio',
      'new_chat': 'Nuevo Chat',
      'conversations': 'Conversaciones',
      'no_conversations_yet': 'Aún no hay conversaciones',
      'start_new_chat': 'Iniciar Nuevo Chat',
      'start_chat_prompt': 'Inicia un nuevo chat para comenzar',
      'search': 'Buscar',
      'documents': 'Documentos',
      'analytics': 'Analíticas',
      'advanced_settings': 'Configuración Avanzada',
      'notifications': 'Notificaciones',
      'feedback_support': 'Comentarios y Soporte',
      'language_changed': 'Idioma Cambiado',
      'app_language_changed_to': 'Idioma de la app cambiado a',
      'notification_settings_saved': 'Configuración de notificaciones guardada exitosamente',
      'feedback_sent': 'Comentario enviado',
      'thanks_for_message': '¡Gracias por tu mensaje! Lo revisaremos pronto.',
      'error': 'Error',
      'success': 'Éxito',
      'welcome_to_eidos': 'Bienvenido a Eidos',
      'search_chats': 'Buscar chats...',
      'account': 'Cuenta',
      'user': 'Usuario',
      'edit_profile': 'Editar Perfil',
      'log_out': 'Cerrar Sesión',
      'create_new_chat': 'Crear Nuevo Chat',
      'chat_archive': 'Archivo de Chat',
      'archive': 'Archivar',
      'unarchive': 'Desarchivar',
      'failed_to_delete_conversation': 'Error al eliminar conversación',
      'type_a_message': 'Escribe un mensaje...',
      'sync_with_cloud': 'Sincronizar con la Nube',
      'sync_all_data_with_cloud': 'Sincronizar todos los datos con la nube',
      'syncing_data': 'Sincronizando datos...',
      'sync_completed_successfully': 'Sincronización completada exitosamente',
      'sync_failed': 'Error de sincronización. Por favor, inténtalo de nuevo.',
      'must_be_logged_in_to_sync': 'Debes iniciar sesión para sincronizar',
      'send': 'Enviar',
      'archived_chats': 'Chats Archivados',
      'no_archived_chats': 'No hay chats archivados',
      'pull_to_refresh': 'Desliza para actualizar',
      'login': 'Iniciar Sesión',
      'register': 'Registrarse',
      'email': 'Correo Electrónico',
      'password': 'Contraseña',
      'full_name': 'Nombre Completo',
      'confirm_password': 'Confirmar Contraseña',
      'forgot_password': '¿Olvidaste tu contraseña?',
      'already_have_account': '¿Ya tienes una cuenta?',
      'dont_have_account': '¿No tienes una cuenta?',
      'sign_in': 'Iniciar Sesión',
      'sign_up': 'Registrarse',
      'sign_in_with_passkey': 'Iniciar sesión con Clave de Acceso',
      'sign_in_with_password': 'Iniciar sesión con Contraseña',
      'choose_login_method': 'Elige el método de inicio de sesión',
      'enter_email_first': 'Ingresa tu correo primero',
      'no_passkey_registered': 'No hay clave de acceso registrada. Por favor usa el inicio de sesión con contraseña.',
      'passkey_authentication': 'Autenticación con Clave de Acceso',
      'register_passkey': 'Registrar Clave de Acceso',
      'manage_passkeys': 'Administrar Claves de Acceso',
      'passkey_registered': 'Tienes una clave de acceso registrada. Puedes iniciar sesión con biometría.',
      'register_passkey_description': 'Registra una clave de acceso para iniciar sesión de forma segura con tu huella o rostro.',
      'enter_password_to_register': 'Ingresa tu contraseña para registrar una clave de acceso. Esto te permitirá iniciar sesión con biometría.',
      'passkey_registered_successfully': '¡Clave de acceso registrada exitosamente!',
      'passkey_deleted_successfully': 'Clave de acceso eliminada exitosamente',
      'device_not_support_biometrics': 'Tu dispositivo no soporta autenticación biométrica.',
      'biometric_authentication_failed': 'La autenticación biométrica fue cancelada o falló. Por favor intenta de nuevo.',
      'no_passkeys_found': 'No se encontró clave de acceso para esta cuenta. Por favor registra una clave de acceso primero o usa el inicio de sesión con contraseña.',
      'passkey_registration_incomplete': 'Registro de clave de acceso incompleto. Por favor registra una nueva clave de acceso.',
      'passkey_authentication_failed': 'La autenticación con clave de acceso falló. Por favor intenta de nuevo o usa el inicio de sesión con contraseña.',
      'change_password': 'Cambiar Contraseña',
      'new_password': 'Nueva Contraseña',
      'save_changes': 'Guardar Cambios',
      'delete_account': 'Eliminar Cuenta',
      'are_you_sure_delete': '¿Estás seguro de que quieres eliminar tu cuenta?',
      'this_action_cannot_be_undone': 'Esta acción no se puede deshacer',
      'profile_picture': 'Foto de Perfil',
      'select_avatar': 'Seleccionar Avatar',
      'upload_image': 'Subir Imagen',
      'take_photo': 'Tomar Foto',
      'choose_from_gallery': 'Elegir de la Galería',
      'frequently_asked_questions': 'Preguntas frecuentes',
      'send_us_message': 'Envíanos un mensaje',
      'how_start_new_chat': '¿Cómo inicio un nuevo chat?',
      'how_start_new_chat_answer': 'Toca el botón + en el encabezado o usa Crear Nuevo Chat desde el menú.',
      'how_change_password': '¿Cómo cambio mi contraseña?',
      'how_change_password_answer': 'Abre Editar Perfil desde el menú del encabezado, luego toca Cambiar Contraseña.',
      'where_find_documents': '¿Dónde puedo encontrar mis documentos?',
      'where_find_documents_answer': 'Abre Documentos desde las acciones rápidas debajo de la barra de búsqueda en Inicio.',
      'how_report_bug': '¿Cómo reporto un error?',
      'how_report_bug_answer': 'Usa el formulario a continuación. Incluye pasos para reproducir y capturas de pantalla si es posible.',
      'subject': 'Asunto',
      'message': 'Mensaje',
      'attach_file': 'Adjuntar Archivo',
      'attachment': 'Adjunto',
      'reminder_created': 'Recordatorio Creado',
      'reminder_set_for': 'Recordatorio programado para',
      'failed_to_create_reminder': 'Error al crear recordatorio',
    },
    AppLanguage.french: {
      'app_name': 'Eidos',
      'preferences': 'Préférences',
      'app_preferences': 'Préférences de l\'App',
      'chat_preferences': 'Préférences de Chat',
      'language': 'Langue',
      'select_app_language': 'Sélectionnez la langue de l\'app',
      'app_theme': 'Thème de l\'App',
      'switch_theme': 'Basculer entre mode clair et sombre',
      'dark_mode': 'Mode Sombre',
      'light_mode': 'Mode Clair',
      'ai_personality': 'Personnalité de l\'IA',
      'select_ai_personality': 'Sélectionnez comment l\'IA doit répondre',
      'chat_rules': 'Règles de Chat',
      'more': 'Plus',
      'cancel': 'Annuler',
      'save': 'Enregistrer',
      'delete': 'Supprimer',
      'edit': 'Modifier',
      'add': 'Ajouter',
      'close': 'Fermer',
      'back': 'Retour',
      'home': 'Accueil',
      'new_chat': 'Nouveau Chat',
      'conversations': 'Conversations',
      'no_conversations_yet': 'Aucune conversation pour le moment',
      'start_new_chat': 'Démarrer un Nouveau Chat',
      'start_chat_prompt': 'Démarrez un nouveau chat pour commencer',
      'search': 'Rechercher',
      'documents': 'Documents',
      'analytics': 'Analytiques',
      'advanced_settings': 'Paramètres Avancés',
      'notifications': 'Notifications',
      'feedback_support': 'Commentaires et Support',
      'language_changed': 'Langue Changée',
      'app_language_changed_to': 'Langue de l\'app changée en',
      'notification_settings_saved': 'Paramètres de notification enregistrés avec succès',
      'feedback_sent': 'Commentaire envoyé',
      'thanks_for_message': 'Merci pour votre message ! Nous l\'examinerons bientôt.',
      'error': 'Erreur',
      'success': 'Succès',
      'welcome_to_eidos': 'Bienvenue sur Eidos',
      'search_chats': 'Rechercher des chats...',
      'account': 'Compte',
      'user': 'Utilisateur',
      'edit_profile': 'Modifier le Profil',
      'log_out': 'Se Déconnecter',
      'create_new_chat': 'Créer un Nouveau Chat',
      'chat_archive': 'Archive de Chat',
      'archive': 'Archiver',
      'unarchive': 'Désarchiver',
      'failed_to_delete_conversation': 'Échec de la suppression de la conversation',
      'type_a_message': 'Tapez un message...',
      'sync_with_cloud': 'Synchroniser avec le Cloud',
      'sync_all_data_with_cloud': 'Synchroniser toutes les données avec le cloud',
      'syncing_data': 'Synchronisation des données...',
      'sync_completed_successfully': 'Synchronisation terminée avec succès',
      'sync_failed': 'Échec de la synchronisation. Veuillez réessayer.',
      'must_be_logged_in_to_sync': 'Vous devez être connecté pour synchroniser',
      'send': 'Envoyer',
      'archived_chats': 'Chats Archivés',
      'no_archived_chats': 'Aucun chat archivé',
      'pull_to_refresh': 'Tirez pour actualiser',
      'login': 'Connexion',
      'register': 'S\'inscrire',
      'email': 'E-mail',
      'password': 'Mot de passe',
      'full_name': 'Nom Complet',
      'confirm_password': 'Confirmer le Mot de passe',
      'forgot_password': 'Mot de passe oublié?',
      'already_have_account': 'Vous avez déjà un compte?',
      'dont_have_account': 'Vous n\'avez pas de compte?',
      'sign_in': 'Se Connecter',
      'sign_up': 'S\'inscrire',
      'sign_in_with_passkey': 'Se connecter avec la Clé d\'accès',
      'sign_in_with_password': 'Se connecter avec le Mot de passe',
      'choose_login_method': 'Choisissez la méthode de connexion',
      'enter_email_first': 'Entrez d\'abord votre e-mail',
      'no_passkey_registered': 'Aucune clé d\'accès enregistrée. Veuillez utiliser la connexion par mot de passe.',
      'passkey_authentication': 'Authentification par Clé d\'accès',
      'register_passkey': 'Enregistrer une Clé d\'accès',
      'manage_passkeys': 'Gérer les Clés d\'accès',
      'passkey_registered': 'Vous avez une clé d\'accès enregistrée. Vous pouvez vous connecter avec la biométrie.',
      'register_passkey_description': 'Enregistrez une clé d\'accès pour vous connecter en toute sécurité avec votre empreinte ou votre visage.',
      'enter_password_to_register': 'Entrez votre mot de passe pour enregistrer une clé d\'accès. Cela vous permettra de vous connecter avec la biométrie.',
      'passkey_registered_successfully': 'Clé d\'accès enregistrée avec succès!',
      'passkey_deleted_successfully': 'Clé d\'accès supprimée avec succès',
      'device_not_support_biometrics': 'Votre appareil ne prend pas en charge l\'authentification biométrique.',
      'biometric_authentication_failed': 'L\'authentification biométrique a été annulée ou a échoué. Veuillez réessayer.',
      'no_passkeys_found': 'Aucune clé d\'accès trouvée pour ce compte. Veuillez d\'abord enregistrer une clé d\'accès ou utiliser la connexion par mot de passe.',
      'passkey_registration_incomplete': 'Enregistrement de la clé d\'accès incomplet. Veuillez enregistrer une nouvelle clé d\'accès.',
      'passkey_authentication_failed': 'L\'authentification par clé d\'accès a échoué. Veuillez réessayer ou utiliser la connexion par mot de passe.',
      'change_password': 'Changer le Mot de passe',
      'new_password': 'Nouveau Mot de passe',
      'save_changes': 'Enregistrer les Modifications',
      'delete_account': 'Supprimer le Compte',
      'are_you_sure_delete': 'Êtes-vous sûr de vouloir supprimer votre compte?',
      'this_action_cannot_be_undone': 'Cette action ne peut pas être annulée',
      'profile_picture': 'Photo de Profil',
      'select_avatar': 'Sélectionner un Avatar',
      'upload_image': 'Télécharger une Image',
      'take_photo': 'Prendre une Photo',
      'choose_from_gallery': 'Choisir dans la Galerie',
      'frequently_asked_questions': 'Questions fréquemment posées',
      'send_us_message': 'Envoyez-nous un message',
      'how_start_new_chat': 'Comment démarrer un nouveau chat?',
      'how_start_new_chat_answer': 'Appuyez sur le bouton + dans l\'en-tête ou utilisez Créer un Nouveau Chat depuis le menu.',
      'how_change_password': 'Comment changer mon mot de passe?',
      'how_change_password_answer': 'Ouvrez Modifier le Profil depuis le menu de l\'en-tête, puis appuyez sur Changer le Mot de passe.',
      'where_find_documents': 'Où puis-je trouver mes documents?',
      'where_find_documents_answer': 'Ouvrez Documents depuis les actions rapides sous la barre de recherche sur l\'Accueil.',
      'how_report_bug': 'Comment signaler un bug?',
      'how_report_bug_answer': 'Utilisez le formulaire ci-dessous. Incluez les étapes pour reproduire et des captures d\'écran si possible.',
      'subject': 'Sujet',
      'message': 'Message',
      'attach_file': 'Joindre un Fichier',
      'attachment': 'Pièce jointe',
      'reminder_created': 'Rappel Créé',
      'reminder_set_for': 'Rappel programmé pour',
      'failed_to_create_reminder': 'Échec de la création du rappel',
    },
    AppLanguage.german: {
      'app_name': 'Eidos',
      'preferences': 'Einstellungen',
      'app_preferences': 'App-Einstellungen',
      'chat_preferences': 'Chat-Einstellungen',
      'language': 'Sprache',
      'select_app_language': 'App-Sprache auswählen',
      'app_theme': 'App-Design',
      'switch_theme': 'Zwischen hellem und dunklem Modus wechseln',
      'dark_mode': 'Dunkler Modus',
      'light_mode': 'Heller Modus',
      'ai_personality': 'KI-Persönlichkeit',
      'select_ai_personality': 'Auswählen, wie die KI antworten soll',
      'chat_rules': 'Chat-Regeln',
      'more': 'Mehr',
      'cancel': 'Abbrechen',
      'save': 'Speichern',
      'delete': 'Löschen',
      'edit': 'Bearbeiten',
      'add': 'Hinzufügen',
      'close': 'Schließen',
      'back': 'Zurück',
      'home': 'Startseite',
      'new_chat': 'Neuer Chat',
      'conversations': 'Unterhaltungen',
      'no_conversations_yet': 'Noch keine Unterhaltungen',
      'start_new_chat': 'Neuen Chat starten',
      'start_chat_prompt': 'Starten Sie einen neuen Chat, um zu beginnen',
      'search': 'Suchen',
      'documents': 'Dokumente',
      'analytics': 'Analysen',
      'advanced_settings': 'Erweiterte Einstellungen',
      'notifications': 'Benachrichtigungen',
      'feedback_support': 'Feedback & Support',
      'language_changed': 'Sprache Geändert',
      'app_language_changed_to': 'App-Sprache geändert zu',
      'notification_settings_saved': 'Benachrichtigungseinstellungen erfolgreich gespeichert',
      'feedback_sent': 'Feedback Gesendet',
      'thanks_for_message': 'Vielen Dank für Ihre Nachricht! Wir werden sie bald überprüfen.',
      'error': 'Fehler',
      'success': 'Erfolg',
      'welcome_to_eidos': 'Willkommen bei Eidos',
      'search_chats': 'Chats suchen...',
      'account': 'Konto',
      'user': 'Benutzer',
      'edit_profile': 'Profil Bearbeiten',
      'log_out': 'Abmelden',
      'create_new_chat': 'Neuen Chat Erstellen',
      'chat_archive': 'Chat-Archiv',
      'archive': 'Archivieren',
      'unarchive': 'Entarchivieren',
      'failed_to_delete_conversation': 'Konversation konnte nicht gelöscht werden',
      'type_a_message': 'Nachricht eingeben...',
      'sync_with_cloud': 'Mit Cloud synchronisieren',
      'sync_all_data_with_cloud': 'Alle Daten mit der Cloud synchronisieren',
      'syncing_data': 'Daten werden synchronisiert...',
      'sync_completed_successfully': 'Synchronisierung erfolgreich abgeschlossen',
      'sync_failed': 'Synchronisierung fehlgeschlagen. Bitte versuchen Sie es erneut.',
      'must_be_logged_in_to_sync': 'Sie müssen angemeldet sein, um zu synchronisieren',
      'send': 'Senden',
      'archived_chats': 'Archivierte Chats',
      'no_archived_chats': 'Keine archivierten Chats',
      'pull_to_refresh': 'Zum Aktualisieren ziehen',
      'login': 'Anmelden',
      'register': 'Registrieren',
      'email': 'E-Mail',
      'password': 'Passwort',
      'full_name': 'Vollständiger Name',
      'confirm_password': 'Passwort Bestätigen',
      'forgot_password': 'Passwort vergessen?',
      'already_have_account': 'Haben Sie bereits ein Konto?',
      'dont_have_account': 'Haben Sie kein Konto?',
      'sign_in': 'Anmelden',
      'sign_up': 'Registrieren',
      'sign_in_with_passkey': 'Mit Passkey anmelden',
      'sign_in_with_password': 'Mit Passwort anmelden',
      'choose_login_method': 'Anmeldemethode wählen',
      'enter_email_first': 'Geben Sie zuerst Ihre E-Mail ein',
      'no_passkey_registered': 'Kein Passkey registriert. Bitte verwenden Sie die Passwort-Anmeldung.',
      'passkey_authentication': 'Passkey-Authentifizierung',
      'register_passkey': 'Passkey registrieren',
      'manage_passkeys': 'Passkeys verwalten',
      'passkey_registered': 'Sie haben einen Passkey registriert. Sie können sich mit Biometrie anmelden.',
      'register_passkey_description': 'Registrieren Sie einen Passkey, um sich sicher mit Ihrem Fingerabdruck oder Gesicht anzumelden.',
      'enter_password_to_register': 'Geben Sie Ihr Passwort ein, um einen Passkey zu registrieren. Dies ermöglicht es Ihnen, sich mit Biometrie anzumelden.',
      'passkey_registered_successfully': 'Passkey erfolgreich registriert!',
      'passkey_deleted_successfully': 'Passkey erfolgreich gelöscht',
      'device_not_support_biometrics': 'Ihr Gerät unterstützt keine biometrische Authentifizierung.',
      'biometric_authentication_failed': 'Die biometrische Authentifizierung wurde abgebrochen oder ist fehlgeschlagen. Bitte versuchen Sie es erneut.',
      'no_passkeys_found': 'Kein Passkey für dieses Konto gefunden. Bitte registrieren Sie zuerst einen Passkey oder verwenden Sie die Passwort-Anmeldung.',
      'passkey_registration_incomplete': 'Passkey-Registrierung unvollständig. Bitte registrieren Sie einen neuen Passkey.',
      'passkey_authentication_failed': 'Passkey-Authentifizierung fehlgeschlagen. Bitte versuchen Sie es erneut oder verwenden Sie die Passwort-Anmeldung.',
      'change_password': 'Passwort Ändern',
      'new_password': 'Neues Passwort',
      'save_changes': 'Änderungen Speichern',
      'delete_account': 'Konto Löschen',
      'are_you_sure_delete': 'Sind Sie sicher, dass Sie Ihr Konto löschen möchten?',
      'this_action_cannot_be_undone': 'Diese Aktion kann nicht rückgängig gemacht werden',
      'profile_picture': 'Profilbild',
      'select_avatar': 'Avatar Auswählen',
      'upload_image': 'Bild Hochladen',
      'take_photo': 'Foto Aufnehmen',
      'choose_from_gallery': 'Aus Galerie Auswählen',
      'frequently_asked_questions': 'Häufig gestellte Fragen',
      'send_us_message': 'Senden Sie uns eine Nachricht',
      'how_start_new_chat': 'Wie starte ich einen neuen Chat?',
      'how_start_new_chat_answer': 'Tippen Sie auf die Schaltfläche + in der Kopfzeile oder verwenden Sie Neuen Chat Erstellen aus dem Menü.',
      'how_change_password': 'Wie ändere ich mein Passwort?',
      'how_change_password_answer': 'Öffnen Sie Profil Bearbeiten aus dem Kopfzeilenmenü, dann tippen Sie auf Passwort Ändern.',
      'where_find_documents': 'Wo finde ich meine Dokumente?',
      'where_find_documents_answer': 'Öffnen Sie Dokumente aus den Schnellaktionen unter der Suchleiste auf der Startseite.',
      'how_report_bug': 'Wie melde ich einen Fehler?',
      'how_report_bug_answer': 'Verwenden Sie das untenstehende Formular. Fügen Sie Schritte zur Reproduktion und Screenshots hinzu, wenn möglich.',
      'subject': 'Betreff',
      'message': 'Nachricht',
      'attach_file': 'Datei Anhängen',
      'attachment': 'Anhang',
      'reminder_created': 'Erinnerung Erstellt',
      'reminder_set_for': 'Erinnerung eingestellt für',
      'failed_to_create_reminder': 'Erinnerung konnte nicht erstellt werden',
    },
    AppLanguage.italian: {
      'app_name': 'Eidos',
      'preferences': 'Preferenze',
      'app_preferences': 'Preferenze App',
      'chat_preferences': 'Preferenze Chat',
      'language': 'Lingua',
      'select_app_language': 'Seleziona la lingua dell\'app',
      'app_theme': 'Tema App',
      'switch_theme': 'Passa tra modalità chiara e scura',
      'dark_mode': 'Modalità Scura',
      'light_mode': 'Modalità Chiara',
      'ai_personality': 'Personalità IA',
      'select_ai_personality': 'Seleziona come l\'IA deve rispondere',
      'chat_rules': 'Regole Chat',
      'more': 'Altro',
      'cancel': 'Annulla',
      'save': 'Salva',
      'delete': 'Elimina',
      'edit': 'Modifica',
      'add': 'Aggiungi',
      'close': 'Chiudi',
      'back': 'Indietro',
      'home': 'Home',
      'new_chat': 'Nuova Chat',
      'conversations': 'Conversazioni',
      'no_conversations_yet': 'Nessuna conversazione ancora',
      'start_new_chat': 'Inizia Nuova Chat',
      'start_chat_prompt': 'Inizia una nuova chat per cominciare',
      'search': 'Cerca',
      'documents': 'Documenti',
      'analytics': 'Analisi',
      'advanced_settings': 'Impostazioni Avanzate',
      'notifications': 'Notifiche',
      'feedback_support': 'Feedback e Supporto',
      'language_changed': 'Lingua Cambiata',
      'app_language_changed_to': 'Lingua dell\'app cambiata in',
      'notification_settings_saved': 'Impostazioni notifiche salvate con successo',
      'feedback_sent': 'Feedback Inviato',
      'thanks_for_message': 'Grazie per il tuo messaggio! Lo esamineremo presto.',
      'error': 'Errore',
      'success': 'Successo',
      'welcome_to_eidos': 'Benvenuto in Eidos',
      'search_chats': 'Cerca chat...',
      'account': 'Account',
      'user': 'Utente',
      'edit_profile': 'Modifica Profilo',
      'log_out': 'Esci',
      'create_new_chat': 'Crea Nuova Chat',
      'chat_archive': 'Archivio Chat',
      'archive': 'Archivia',
      'unarchive': 'Ripristina',
      'failed_to_delete_conversation': 'Impossibile eliminare la conversazione',
      'type_a_message': 'Digita un messaggio...',
      'sync_with_cloud': 'Sincronizza con il Cloud',
      'sync_all_data_with_cloud': 'Sincronizza tutti i dati con il cloud',
      'syncing_data': 'Sincronizzazione dei dati...',
      'sync_completed_successfully': 'Sincronizzazione completata con successo',
      'sync_failed': 'Sincronizzazione fallita. Per favore riprova.',
      'must_be_logged_in_to_sync': 'Devi essere connesso per sincronizzare',
      'send': 'Invia',
      'archived_chats': 'Chat Archiviate',
      'no_archived_chats': 'Nessuna chat archiviata',
      'pull_to_refresh': 'Trascina per aggiornare',
      'login': 'Accedi',
      'register': 'Registrati',
      'email': 'E-mail',
      'password': 'Password',
      'full_name': 'Nome Completo',
      'confirm_password': 'Conferma Password',
      'forgot_password': 'Password dimenticata?',
      'already_have_account': 'Hai già un account?',
      'dont_have_account': 'Non hai un account?',
      'sign_in': 'Accedi',
      'sign_up': 'Registrati',
      'sign_in_with_passkey': 'Accedi con Passkey',
      'sign_in_with_password': 'Accedi con Password',
      'choose_login_method': 'Scegli il metodo di accesso',
      'enter_email_first': 'Inserisci prima la tua email',
      'no_passkey_registered': 'Nessun passkey registrato. Si prega di utilizzare l\'accesso con password.',
      'passkey_authentication': 'Autenticazione Passkey',
      'register_passkey': 'Registra Passkey',
      'manage_passkeys': 'Gestisci Passkey',
      'passkey_registered': 'Hai un passkey registrato. Puoi accedere con la biometria.',
      'register_passkey_description': 'Registra un passkey per accedere in modo sicuro con la tua impronta digitale o il tuo viso.',
      'enter_password_to_register': 'Inserisci la tua password per registrare un passkey. Questo ti permetterà di accedere con la biometria.',
      'passkey_registered_successfully': 'Passkey registrato con successo!',
      'passkey_deleted_successfully': 'Passkey eliminato con successo',
      'device_not_support_biometrics': 'Il tuo dispositivo non supporta l\'autenticazione biometrica.',
      'biometric_authentication_failed': 'L\'autenticazione biometrica è stata annullata o non è riuscita. Riprova.',
      'no_passkeys_found': 'Nessun passkey trovato per questo account. Si prega di registrare prima un passkey o utilizzare l\'accesso con password.',
      'passkey_registration_incomplete': 'Registrazione passkey incompleta. Si prega di registrare un nuovo passkey.',
      'passkey_authentication_failed': 'Autenticazione passkey fallita. Riprova o utilizza l\'accesso con password.',
      'change_password': 'Cambia Password',
      'new_password': 'Nuova Password',
      'save_changes': 'Salva Modifiche',
      'delete_account': 'Elimina Account',
      'are_you_sure_delete': 'Sei sicuro di voler eliminare il tuo account?',
      'this_action_cannot_be_undone': 'Questa azione non può essere annullata',
      'profile_picture': 'Foto Profilo',
      'select_avatar': 'Seleziona Avatar',
      'upload_image': 'Carica Immagine',
      'take_photo': 'Scatta Foto',
      'choose_from_gallery': 'Scegli dalla Galleria',
      'frequently_asked_questions': 'Domande frequenti',
      'send_us_message': 'Inviaci un messaggio',
      'how_start_new_chat': 'Come avvio una nuova chat?',
      'how_start_new_chat_answer': 'Tocca il pulsante + nell\'intestazione o usa Crea Nuova Chat dal menu.',
      'how_change_password': 'Come cambio la mia password?',
      'how_change_password_answer': 'Apri Modifica Profilo dal menu dell\'intestazione, poi tocca Cambia Password.',
      'where_find_documents': 'Dove posso trovare i miei documenti?',
      'where_find_documents_answer': 'Apri Documenti dalle azioni rapide sotto la barra di ricerca nella Home.',
      'how_report_bug': 'Come segnalo un bug?',
      'how_report_bug_answer': 'Usa il modulo qui sotto. Includi passaggi per riprodurre e screenshot se possibile.',
      'subject': 'Oggetto',
      'message': 'Messaggio',
      'attach_file': 'Allega File',
      'attachment': 'Allegato',
      'reminder_created': 'Promemoria Creato',
      'reminder_set_for': 'Promemoria impostato per',
      'failed_to_create_reminder': 'Impossibile creare il promemoria',
    },
    AppLanguage.portuguese: {
      'app_name': 'Eidos',
      'preferences': 'Preferências',
      'app_preferences': 'Preferências do App',
      'chat_preferences': 'Preferências de Chat',
      'language': 'Idioma',
      'select_app_language': 'Selecione o idioma do app',
      'app_theme': 'Tema do App',
      'switch_theme': 'Alternar entre modo claro e escuro',
      'dark_mode': 'Modo Escuro',
      'light_mode': 'Modo Claro',
      'ai_personality': 'Personalidade da IA',
      'select_ai_personality': 'Selecione como a IA deve responder',
      'chat_rules': 'Regras de Chat',
      'more': 'Mais',
      'cancel': 'Cancelar',
      'save': 'Salvar',
      'delete': 'Excluir',
      'edit': 'Editar',
      'add': 'Adicionar',
      'close': 'Fechar',
      'back': 'Voltar',
      'home': 'Início',
      'new_chat': 'Nova Conversa',
      'conversations': 'Conversas',
      'no_conversations_yet': 'Ainda não há conversas',
      'start_new_chat': 'Iniciar Nova Conversa',
      'start_chat_prompt': 'Inicie uma nova conversa para começar',
      'search': 'Pesquisar',
      'documents': 'Documentos',
      'analytics': 'Análises',
      'advanced_settings': 'Configurações Avançadas',
      'notifications': 'Notificações',
      'feedback_support': 'Feedback e Suporte',
      'language_changed': 'Idioma Alterado',
      'app_language_changed_to': 'Idioma do app alterado para',
      'notification_settings_saved': 'Configurações de notificação salvas com sucesso',
      'feedback_sent': 'Feedback Enviado',
      'thanks_for_message': 'Obrigado pela sua mensagem! Vamos revisá-la em breve.',
      'error': 'Erro',
      'success': 'Sucesso',
      'welcome_to_eidos': 'Bem-vindo ao Eidos',
      'search_chats': 'Pesquisar chats...',
      'account': 'Conta',
      'user': 'Usuário',
      'edit_profile': 'Editar Perfil',
      'log_out': 'Sair',
      'create_new_chat': 'Criar Nova Conversa',
      'chat_archive': 'Arquivo de Chat',
      'archive': 'Arquivar',
      'unarchive': 'Desarquivar',
      'failed_to_delete_conversation': 'Falha ao excluir conversa',
      'type_a_message': 'Digite uma mensagem...',
      'sync_with_cloud': 'Sincronizar com a Nuvem',
      'sync_all_data_with_cloud': 'Sincronizar todos os dados com a nuvem',
      'syncing_data': 'Sincronizando dados...',
      'sync_completed_successfully': 'Sincronização concluída com sucesso',
      'sync_failed': 'Falha na sincronização. Por favor, tente novamente.',
      'must_be_logged_in_to_sync': 'Você deve estar logado para sincronizar',
      'send': 'Enviar',
      'archived_chats': 'Conversas Arquivadas',
      'no_archived_chats': 'Nenhuma conversa arquivada',
      'pull_to_refresh': 'Puxe para atualizar',
      'login': 'Entrar',
      'register': 'Registrar',
      'email': 'E-mail',
      'password': 'Senha',
      'full_name': 'Nome Completo',
      'confirm_password': 'Confirmar Senha',
      'forgot_password': 'Esqueceu a senha?',
      'already_have_account': 'Já tem uma conta?',
      'dont_have_account': 'Não tem uma conta?',
      'sign_in': 'Entrar',
      'sign_up': 'Registrar',
      'sign_in_with_passkey': 'Entrar com Passkey',
      'sign_in_with_password': 'Entrar com Senha',
      'choose_login_method': 'Escolha o método de login',
      'enter_email_first': 'Digite seu e-mail primeiro',
      'no_passkey_registered': 'Nenhum passkey registrado. Por favor, use o login com senha.',
      'passkey_authentication': 'Autenticação Passkey',
      'register_passkey': 'Registrar Passkey',
      'manage_passkeys': 'Gerenciar Passkeys',
      'passkey_registered': 'Você tem um passkey registrado. Você pode fazer login com biometria.',
      'register_passkey_description': 'Registre um passkey para fazer login com segurança usando sua impressão digital ou rosto.',
      'enter_password_to_register': 'Digite sua senha para registrar um passkey. Isso permitirá que você faça login com biometria.',
      'passkey_registered_successfully': 'Passkey registrado com sucesso!',
      'passkey_deleted_successfully': 'Passkey excluído com sucesso',
      'device_not_support_biometrics': 'Seu dispositivo não suporta autenticação biométrica.',
      'biometric_authentication_failed': 'A autenticação biométrica foi cancelada ou falhou. Por favor, tente novamente.',
      'no_passkeys_found': 'Nenhum passkey encontrado para esta conta. Por favor, registre um passkey primeiro ou use o login com senha.',
      'passkey_registration_incomplete': 'Registro de passkey incompleto. Por favor, registre um novo passkey.',
      'passkey_authentication_failed': 'Autenticação passkey falhou. Por favor, tente novamente ou use o login com senha.',
      'change_password': 'Alterar Senha',
      'new_password': 'Nova Senha',
      'save_changes': 'Salvar Alterações',
      'delete_account': 'Excluir Conta',
      'are_you_sure_delete': 'Tem certeza de que deseja excluir sua conta?',
      'this_action_cannot_be_undone': 'Esta ação não pode ser desfeita',
      'profile_picture': 'Foto de Perfil',
      'select_avatar': 'Selecionar Avatar',
      'upload_image': 'Carregar Imagem',
      'take_photo': 'Tirar Foto',
      'choose_from_gallery': 'Escolher da Galeria',
      'frequently_asked_questions': 'Perguntas frequentes',
      'send_us_message': 'Envie-nos uma mensagem',
      'how_start_new_chat': 'Como inicio uma nova conversa?',
      'how_start_new_chat_answer': 'Toque no botão + no cabeçalho ou use Criar Nova Conversa do menu.',
      'how_change_password': 'Como altero minha senha?',
      'how_change_password_answer': 'Abra Editar Perfil do menu do cabeçalho, depois toque em Alterar Senha.',
      'where_find_documents': 'Onde posso encontrar meus documentos?',
      'where_find_documents_answer': 'Abra Documentos das ações rápidas abaixo da barra de pesquisa na Home.',
      'how_report_bug': 'Como reporto um bug?',
      'how_report_bug_answer': 'Use o formulário abaixo. Inclua passos para reproduzir e capturas de tela se possível.',
      'subject': 'Assunto',
      'message': 'Mensagem',
      'attach_file': 'Anexar Arquivo',
      'attachment': 'Anexo',
      'reminder_created': 'Lembrete Criado',
      'reminder_set_for': 'Lembrete agendado para',
      'failed_to_create_reminder': 'Falha ao criar lembrete',
    },
  };

  /// Get translated string
  /// This method is reactive - it will trigger rebuilds when language changes
  static String translate(String key, {String? defaultValue}) {
    // Access the current language value to make this reactive
    final currentLang = _currentLanguage.value;
    final translations = _translations[currentLang];
    if (translations != null && translations.containsKey(key)) {
      return translations[key]!;
    }
    // Fallback to English if translation not found
    final englishTranslations = _translations[AppLanguage.english];
    if (englishTranslations != null && englishTranslations.containsKey(key)) {
      return englishTranslations[key]!;
    }
    // Return default value or key if not found
    return defaultValue ?? key;
  }
  
  /// Get translated string (non-reactive version for performance-critical areas)
  /// Use this when you don't need reactive updates
  static String translateStatic(String key, {String? defaultValue}) {
    final translations = _translations[_currentLanguage.value];
    if (translations != null && translations.containsKey(key)) {
      return translations[key]!;
    }
    // Fallback to English if translation not found
    final englishTranslations = _translations[AppLanguage.english];
    if (englishTranslations != null && englishTranslations.containsKey(key)) {
      return englishTranslations[key]!;
    }
    // Return default value or key if not found
    return defaultValue ?? key;
  }

  /// Get all available languages
  static List<AppLanguage> get availableLanguages => AppLanguage.values;
}

